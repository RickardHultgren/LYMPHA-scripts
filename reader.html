<html>
    <head>
        <link rel="stylesheet" href="https://pyscript.net/alpha/pyscript.css" />
        <script defer src="https://pyscript.net/alpha/pyscript.js"></script>
    </head>
<body>
    Select ICD:
    <select id="ICD" name="ICD">
        <option value="NFB29">NFB29 Primär total höftledsplastik utan cement</option>
        <option value="NGB49">NGB49 Primär totalprotes i knäled med cement</option>
    </select>
    <button id="select-button" type="submit" pys-onClick="select_function">OK</button>
<hr>
<div id="pharma-list">
</div>
<hr>
<hr>
<hr>

    <div>Type in date input here</div>
    <input type="text" id="indate-input" style="border-color:#000;"/>

    <div>Type out dateinput here</div>
    <input type="text" id="outdate-input" style="border-color:#000;"/>

    <div>Type op date input here</div>
    <input type="text" id="opdate-input" style="border-color:#000;"/>

    <div>Type type input here</div>
    <input type="text" id="type-input" style="border-color:#000;"/>

    <div>Type side input here</div>
    <select id="side-input">
        <option value="höger sida">höger sida</option>
        <option value="vänster sida">vänster sida</option>
        <option value="båda sidor">båda sidor</option>
    </select>

    <div>Type ward input here</div>
    <input type="text" id="ward-input" style="border-color:#000;"/>

    <button id="submit-button" type="submit" pys-onClick="submit_function">OK</button>
    <hr style="border:1em;">
    <div id="output"></div>

    <py-env>
    </py-env>
    <py-script>
    from js import console

    indate = str("")
    outdate = str("")
    opdate = str("")
    type = str("")
    side = str("")
    ward = str("")
    pharma = str("")
    def select_function(*args, **kwargs):

        console.log(f'args: {args}')
        console.log(f'kwargs: {kwargs}')
    
        ICD = Element('ICD').element.value        
        if ICD == "NFB29" :
            Element('type-input').element.value = "primär total höftledsplastik utan cement"
            Element('ward-input').element.value = "78"
            Element('pharma-list').element.innerText = ("Cilaxoral 7,5mg/ml 10droppar i 1en vecka mot förstoppning.\nEliquis 2,5mg 1 tablett 2 gånger dagligen i 30 dagar mot blodproppar\nOmeprazol 20mg 1 tablett 1gång dagligen i 1 vecka, magskyddande.\nOxynorm 5mg 2vb, max 4 per dag. Smärtstillande\nParacetamol 500mg 2 tabletter 3 gånger dagligen i 4 veckor. Smärtstillande.\n")
        if ICD == "NGB49" :
            Element('type-input').element.value = "primär totalprotes i knäled med cement"
            Element('ward-input').element.value = "78"
            Element('pharma-list').element.innerText = ("abc")
    def submit_function(*args, **kwargs):

        global indate 
        global outdate 
        global opdate 
        global type 
        global side 
        global ward 

        #print('args:', args)
        #print('kwargs:', kwargs)

        console.log(f'args: {args}')
        console.log(f'kwargs: {kwargs}')
    
        indate = Element('indate-input').element.value
        outdate = Element('outdate-input').element.value
        opdate = Element('opdate-input').element.value
        type = Element('type-input').element.value
        side = Element('side-input').element.value
        ward = Element('ward-input').element.value

        #print('indate:', indate)
        console.log(f'indate: {indate}')
        console.log(f'outdate: {outdate}')
        console.log(f'opdate: {opdate}')
        console.log(f'type: {type}')
        console.log(f'side: {side}')
        console.log(f'ward: {ward}')
        Element('output').element.innerText = ("Du inkom %s till ortopeden Arvika sjukhus för %s %s som opererades in den %s. Operationen var komplikationsfri och efter operationen har du mått väsentligen bra. Du är adekvat smärtlindrad och har kunnat mobiliseras bra med sjukgymnast på avdelningen. Du anses tillsammans med oss vara utskrivningsklar från avdelning %s." % (indate, type, side, opdate, ward))

    #print("Du inkom %s till ortopeden Arvika sjukhus för %s %s sida som opererades in den %s. Operationen var komplikationsfri och efter operationen har du mått väsentligen bra. Du är adekvat smärtlindrad och har kunnat mobiliseras bra med sjukgymnast på avdelningen. Du anses tillsammans med oss vara utskrivningsklar från avdelning %s." % (indate, type, side, opdate, ward))

    </py-script>
</body>
</html>
